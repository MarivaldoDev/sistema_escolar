{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'global/css/turma_detail.css' %}">
  <link rel="icon" type="image/x-icon" href="{% static 'global/images/icone.ico' %}">
  <title>Alunos da Turma</title>
</head>
<body>
  <header>
    <h1>{{ turma.name }} - Detalhes ({{ subject.name }})</h1>
    <nav>
      <a href="/turmas/">Voltar</a>
    </nav>
  </header>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Foto</th>
          <th>Nome</th>
          <th>Matrícula</th>
          <th>Status</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
      {% for aluno in alunos %}
      <tr>
        <td>
          {% if aluno.image_profile %}
            <img src="{{ aluno.image_profile.url }}" alt="Foto de {{ aluno.first_name }} {{ aluno.last_name }}" class="foto-user">
          {% else %}
            <img src="{% static 'global/images/image_default.png' %}" alt="Sem foto" class="foto-user">
          {% endif %}
        </td>
        <td>{{ aluno.first_name }} {{ aluno.last_name }}</td>
        <td>{{ aluno.registration_number }}</td>
        <td>
          {% if aluno.status == "aprovado" %}
            <span class="badge">Aprovado</span>
          {% else %}
            <span class="badge reprovado">Reprovado</span>
          {% endif %}
        </td>
        <td class="acoes">
          <a href="{% url 'add_grade' team_id=turma.id subject_id=subject.id student_id=aluno.id %}" class="btn btn-lancar">
            Lançar Nota
          </a>
          <a href="{% url 'update_grade' team_id=turma.id subject_id=subject.id student_id=aluno.id %}" class="btn btn-editar">
            Editar Nota
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
    </table>
  </div>

  <footer>
    Sistema de Notas © 2025
  </footer>
</body>
</html>